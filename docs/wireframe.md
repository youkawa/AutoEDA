# AutoEDA ワイヤーフレーム v1 (実装同期版)

> 対象: `apps/web` の現行 UI。サイドバー + コンテンツ領域という最低限の構成に合わせ、各ページの Lo-Fi ワイヤーフレームを更新する。アップロード UI など未実装要素はバックログとして明記する。

---

## 0. 共通レイアウト

```
┌──────────────────────────────────────────────┐
│ Sidebar (220px)                              │
│ ┌──────────────┐ ┌──────────────────────────┐ │
│ │ AutoEDA      │ │ Main Content (flex:1)    │ │
│ │ - Home       │ │  ページ毎に内容が変化    │ │
│ │ - Datasets   │ │  Padding: 24             │ │
│ │ - Settings   │ │                          │ │
│ └──────────────┘ └──────────────────────────┘ │
└──────────────────────────────────────────────┘
```

- ナビゲーションは `Link` コンポーネント。アクティブ表示なし (改善候補)。
- 全ページで見出し (`<h1>`) を先頭に配置。

---

## 1. Home (`/`)

```
┌ Main ───────────────────────────────────────┐
│ [H1] Home                                   │
│  データをアップロードしてEDAを開始できます。 │
│  左のメニューから Datasets へ進んでください。│
└───────────────────────────────────────────┘
```

*バックログ*: CSV ドロップ領域とアップロードボタンを追加。

---

## 2. Datasets (`/datasets`)

```
┌ Main ───────────────────────────────────────┐
│ [H1] Datasets                               │
│  • ds_xxx.csv  [Button variant="ghost"]    │
│  • ds_yyy.csv  [Button variant="ghost"]    │
└───────────────────────────────────────────┘
```

- `Button` を押下すると `/eda/:datasetId` へ遷移。
- リストが空の場合は fallback モックが表示される。

---

## 3. EDA Summary (`/eda/:datasetId`)

```
┌ Main ───────────────────────────────────────────────────────┐
│ [H1] EDA 概要                                              │
│ [Optional Banner] LLMフォールバック                        │
│ [Section] サマリー: 行数 / 列数 / 欠損率                   │
│ [Section] 主要な分布: 箇条書き                             │
│ [Section] 品質課題: severity + 説明                        │
│ [Section] 注目すべき特徴: 箇条書き                         │
│ [Section] 次アクション: 番号付きリスト (score/impact)      │
│ [View Toggle] 統計ビュー / 引用ビュー                       │
│   - 統計ビュー: 欠損率 / 課題数 / 提案数                   │
│   - 引用ビュー: kind:locator リスト (tool: は警告表示)      │
│ [Links] Charts / Q&A / Next Actions / PII / Leakage / Recipes│
└──────────────────────────────────────────────────────────┘
```

---

## 4. Charts (`/charts/:datasetId`)

```
┌ Main ───────────────────────────────────────────────────────┐
│ [H1] Charts 候補                                            │
│  for each chart:                                            │
│   • type (bar/line/scatter)                                 │
│   • explanation                                              │
│   • consistency: 97%                                         │
│   • diagnostics: trend / correlation / dominant_ratio        │
└──────────────────────────────────────────────────────────┘
```

---

## 5. Q&A (`/qna/:datasetId`)

```
┌ Main ───────────────────────────────────────────────────────┐
│ [H1] Q&A                                                   │
│ [Input] question (width:60%) [Button] 質問する             │
│ [Loading] 問い合わせ中... (optional)                      │
│ [Section] 回答: テキスト / coverage                        │
│ [Section] 引用一覧: kind: locator                          │
└──────────────────────────────────────────────────────────┘
```

---

## 6. Next Actions (`/actions/:datasetId`)

```
┌ Main ───────────────────────────────────────────────────────┐
│ [H1] Next Actions                                          │
│ [Optional Banner] LLMフォールバック                        │
│ [Ordered List] title + WSJF/RICE + 理由                     │
│ [View Toggle] 統計ビュー / 引用ビュー                       │
│   - 統計: 推定アクション数 / 入力候補数                     │
│   - 引用: kind: locator + tool: 表示                        │
└──────────────────────────────────────────────────────────┘
```

---

## 7. PII (`/pii/:datasetId`)

```
┌ Main ───────────────────────────────────────────────────────┐
│ [H1] PII スキャン                                          │
│ [Section] 検出フィールド: チェックボックス一覧             │
│ [Select] マスクポリシー (MASK/HASH/DROP)                   │
│ [Button] マスクを適用して再計算                            │
│ [Meta] 適用済み / 最終更新                                 │
└──────────────────────────────────────────────────────────┘
```

---

## 8. Leakage (`/leakage/:datasetId`)

```
┌ Main ───────────────────────────────────────────────────────┐
│ [H1] リーク検査                                            │
│ [Section] flagged_columns: チェックボックス                │
│ [Buttons] 除外 / 承認 / リセット (選択が無いと disabled)   │
│ [Meta] 除外済み / 承認済み / 検出ルール / 最終更新         │
└──────────────────────────────────────────────────────────┘
```

---

## 9. Recipes (`/recipes/:datasetId`)

```
┌ Main ───────────────────────────────────────────────────────┐
│ [H1] Recipes                                               │
│ [Optional Banner] LLMフォールバック                        │
│ [Optional Banner] ±1% 乖離警告                             │
│ artifact_hash                                               │
│ summary: rows / cols / missing_rate                         │
│ files: bullet list (名前 + サイズ)                         │
│ [View Toggle] 統計ビュー / 引用ビュー                       │
│   - 統計: measured_summary の数値                          │
│   - 引用: kind: locator                                    │
└──────────────────────────────────────────────────────────┘
```

---

## 10. Settings (`/settings`)

```
┌ Main ───────────────────────────────────────────────────────┐
│ [H1] システム設定                                          │
│ 状態: 使用中プロバイダ / 設定済み or 未設定                │
│ プロバイダ別ステータス (リスト)                           │
│ [Form]                                                     │
│  - select provider (openai/gemini)                         │
│  - password input (api key)                                │
│  - [Button] 保存 (saving state)                             │
│ 成功メッセージ or エラー表示                               │
└──────────────────────────────────────────────────────────┘
```

---

## 11. バックログ要素

- **アップロード UI**: Home にドラッグ&ドロップ領域を追加し、`POST /api/datasets/upload` と連携する。
- **ナビゲーション強調**: 現在地ハイライト、Breadcrumbs を追加。
- **共通カード/リスト化**: EDA/Actions/Recipes のセクションを再利用可能なコンポーネントへ抽出。
- **レスポンシブ対応**: 固定幅からフレックスレイアウトへ改善。

実装更新時は本ワイヤーフレームを差し替え、Storybook と整合させること。
